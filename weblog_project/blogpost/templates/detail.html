{% extends "_base.html" %}

{% load crispy_forms_tags %}

{% load jformat %}

{% load madval_persian_translation %}

{% block titel %}Detail{{ post.titel }}{% endblock titel %}

{% block content %}

{% for message in messages %}
<div class="alert alert-success mt-5" role="alert">
    {{ message }}
</div>
{% endfor %}

<div class="col-8 mx-3">
    <div class="container mt-5 p-4 shadow-lg">
        <h1><a href="#" class="text-decoration-none text-info">{{ post.titel }}</a></h1>
        <hr>
        {% if post.picture %}
            <img src=" {{ post.picture.url }} " alt="aks">
            <hr>
        {% endif %}
        <p>{{ post.description }}</p>
        <hr>
        <h6 class="text-muted small">Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡: {{ post.author }}</h6>
        <h6 class="text-muted small">ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯: {{ post.datetime_created| jformat:"%Y/%m/%d - %H:%M"| pn }}</h6>
        <h6 class="text-muted small">ØªØ§Ø±ÛŒØ® Ø¢Ø®Ø±ÛŒÙ† ÙˆÛŒØ±Ø§ÛŒØ´: {{ post.datetime_modified | jformat:"%Y/%m/%d - %H:%M"| pn}}</h6>
        {% if user.is_authenticated %}
            <form action="" method="post">
                {% csrf_token %}
                <h6 class="text-muted small">
                    {% if user in post.likes.all %}
                        <button class="btn btn-success" type="submit" name="action" value="like">
                    {% else %}
                        <button class="btn btn-outline-success" type="submit" name="action" value="like">
                    {% endif %}
                        ğŸ§¡{{ post.likes.all|length  }}
                    </button>
                </h6>
            </form>
        {% else %}
            <h6 class="text-muted small">ğŸ§¡{{ post.likes.all|length  }}</h6>
        {% endif %}
        {% if user == post.author %}
            <a class="btn btn-outline-warning m-3" href="{% url "update" post.pk %}">ÙˆÛŒØ±Ø§ÛŒØ´ Ù¾Ø³Øª </a>
            <a class="btn btn-outline-danger m-3" href="{% url "delete" post.pk %}">Ø­Ø°Ù Ù¾Ø³Øª </a>
        {% endif %}
    </div>
    <div class="container mt-5 p-4 shadow">
        {% if comments %}
        {% for comment in comments %}
            {% if comment.hide_name %}
                <h4 class="mt-4">Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨ÛŒØ§Ù† Ú©Ø±Ø¯Ù‡:</h4>
            {% else %}
                <h4 class="mt-4">{{comment.name}} Ø¨ÛŒØ§Ù† Ú©Ø±Ø¯Ù‡:</h4>
            {% endif %}
            <p>{{comment.comment}}</p>
            <hr>
        {% endfor %}
        {% else %}
            <h4 class="mt-4">Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø§ÛŒÙ† Ù¾Ø³Øª Ú©Ø§Ù…Ù†Øª Ú©Ù†ÛŒØ¯</h4>
        {% endif %}
    </div>
    <div class="container mt-5 p-4 shadow-lg">
        <form action="" method="post">
            {% csrf_token %}
            <table>
            {{ form | crispy }}
            </table>
            <button type="submit" class="btn btn-outline-success mt-4 me-4" name="action" value="comment">Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±</button>
        </form>
    </div>
</div>
{% endblock content %}